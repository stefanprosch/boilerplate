{# >>> Comp Defaults #}
{% set compDefaults = {
  data: {
    name: 'c-paginateNews',
    numberOfTabs: null,
  },
  classes: {
    root: 'container grid grid-cols-2 md:grid-cols-12 gap-4 md:gap-8 js-observer',
    custom: '',
    tabs: 'col-span-2 md:col-span-12 flex items-center justify-center space-x-2',
    content: 'col-span-2 md:col-span-12',
  },
} %}

  {# >>> Merge data / classes / variants (optional) #}
{% set props = {
  data: data is defined and data is iterable ? compDefaults.data | merge(data) : compDefaults.data,
  classes: classes is defined and classes is iterable ? compDefaults.classes | merge(classes) : compDefaults.classes,
} %}

{% set category = category ?? 0 %}
{% set myCategoryQuery = craft.categories()
  .group('magazin')%}
{# Fetch the categories #}
{% set categories = myCategoryQuery.all() %}

{% do sprig.setConfig({ requestClass: 'loading' }) %}

{# Component #}
<div class="{{ props.data.name }} {{ props.classes.root }} {{ props.classes.custom }}">
  <div class="{{ props.classes.tabs }}">
    <button
      sprig
      s-trigger="click"
      s-indicator="#tab-content"
      s-val:category="0"
      class="btn btn--sm btn--filter {{ category == 0 ? 'active' }}"
    >
      Allgemein
    </button>
    {% for cat in categories %}
      <button
        sprig
        s-trigger="click"
        s-indicator="#tab-content"
        s-val:category="{{ cat.id }}"
        class="btn btn--sm btn--filter {{ category == cat.id ? 'active' }}"
      >
        {{ cat.title }}
      </button>
    {% endfor %}
  </div>

  <div id="tab-content">
    <div class="loading-spinner">
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
        <circle cx="4" cy="12" r="3" fill="currentColor">
          <animate id="svgSpinners3DotsBounce0" attributeName="cy" begin="0;svgSpinners3DotsBounce1.end+0.25s" calcMode="spline" dur="0.6s" keySplines=".33,.66,.66,1;.33,0,.66,.33" values="12;6;12"/>
        </circle>
        <circle cx="12" cy="12" r="3" fill="currentColor">
          <animate attributeName="cy" begin="svgSpinners3DotsBounce0.begin+0.1s" calcMode="spline" dur="0.6s" keySplines=".33,.66,.66,1;.33,0,.66,.33" values="12;6;12"/>
        </circle>
        <circle cx="20" cy="12" r="3" fill="currentColor">
          <animate id="svgSpinners3DotsBounce1" attributeName="cy" begin="svgSpinners3DotsBounce0.begin+0.2s" calcMode="spline" dur="0.6s" keySplines=".33,.66,.66,1;.33,0,.66,.33" values="12;6;12"/>
        </circle>
      </svg>
    </div>

    {# Tab Content #}
    {% set entryQuery = craft.entries
      .section(section)
      .relatedTo(category)
      .with(['assetEntryImage'])
      .orderBy('postDate DESC') %}

    {% set entries = entryQuery.all() %}

    {{ include('_components/stacks/stackNews.twig', {
      data: {
        items: entries ??? null,
        noLazyImageLoadingCount: 6,
      }
    }, withContext = false) }}
  </div>
</div>
