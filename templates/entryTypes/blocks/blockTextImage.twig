{# >>> Comp Defaults #}
{% set compDefaults = {
  data: {
    name: 'c-blockTextImage',
    block: null,
  },
  classes: {
    root: 'container',
    custom: '',
    container: 'grid grid-cols-2 gap-4 md:gap-8',
    text: 'space-y-4 md:space-y-8',
    imageLeft: 'col-span-1 col-start-1',
    imageRight: 'order-last col-span-1 col-start-2',
  },
  variants: {
    lg: {
      tag: 'h2',
    },
    md: {
      tag: 'h3',
    },
    sm: {
      tag: 'h4',
    }
  }
} %}

{# >>> Merge data / classes / variants (optional) #}
{% set props = {
  data: data is defined and data is iterable ? compDefaults.data | merge(data) : compDefaults.data,
  classes: classes is defined and classes is iterable ? compDefaults.classes | merge(classes) : compDefaults.classes,
  variants: compDefaults.variants,
} %}

{% if props.data.block.image ??? null %}
  <div class="{{ props.data.name }} {{ props.classes.root }}  {{ props.classes.custom }}">
    {% set imageVariantClasses = props.classes.imageLeft %}

    {% if props.data.block.imagePosition == 'right' %}
      {% set imageVariantClasses = props.classes.imageRight %}
    {% endif %}

    <div class="{{ props.classes.container }}">
      {{ include('_components/image/image.twig', {
        data: {
          image: props.data.block.image[0] ??? null,
          aspectRatio: props.data.block.imageRatio.value ??? 'aspect-landscape',
          caption: props.data.block.showCaption ??? 1,
          lazy: true,
        },
        classes: {
          custom: imageVariantClasses ??? ''
        }
      }, withContext = false) }}

      <div class="{{ props.classes.text }}">
        {# Headline #}
        {% if props.data.block.textTitle ??? null %}
          {{ include('_components/text/headline.twig', {
            data: {
              text: props.data.block.textTitle ??? null,
              tag: props.variants[props.data.block.variantSize.value].tag ??? null,
              variantSize: props.variants[props.data.block.variantSize.value].tag ??? null,
            },
            classes: {
              custom: ''
            }
          }, withContext = false) }}
        {% endif %}

        {# Text #}
        {{ include('_components/text/richText.twig', {
          data: {
            html: props.data.block.text ??? null,
          }
        }, withContext = false) }}
      </div>
    </div>
  </div>
{% endif %}
